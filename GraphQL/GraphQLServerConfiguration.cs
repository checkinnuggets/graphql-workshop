using ConferencePlanner.GraphQL.Data;
using HotChocolate.Execution.Configuration;

namespace ConferencePlanner.GraphQL;

public static class GraphQLServerConfiguration
{
    public static IRequestExecutorBuilder ConfigureApplicationGraphQLServer(this IRequestExecutorBuilder builder)
    {
        return builder
            .AddAutoGeneratedTypes() // Auto-generation from HotChocolate.Analyzers package.  Name set in ModuleInfo else will be 'Add{ProjectName}Types()'.
            .RegisterDbContext<ApplicationDbContext>()
            .AddGlobalObjectIdentification()
            .AddFiltering()
            .AddSorting()
            .AddInMemorySubscriptions();
    }
}